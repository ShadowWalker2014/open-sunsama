@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Linear-style light mode - clean, subtle, professional */
    --background: 0 0% 100%;
    --foreground: 220 13% 18%;       /* Soft dark gray, not pure black */
    --card: 0 0% 100%;
    --card-foreground: 220 13% 18%;
    --popover: 0 0% 100%;
    --popover-foreground: 220 13% 18%;
    --primary: 238 75% 59%;          /* Linear-style indigo/violet */
    --primary-foreground: 0 0% 100%;
    --secondary: 220 14% 96%;        /* Very subtle gray */
    --secondary-foreground: 220 13% 18%;
    --muted: 220 14% 96%;
    --muted-foreground: 220 9% 46%;  /* Muted text */
    --accent: 220 14% 96%;
    --accent-foreground: 220 13% 18%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    --border: 220 13% 91%;           /* Very subtle borders */
    --input: 220 13% 91%;
    --ring: 238 75% 59%;
    --radius: 0.375rem;              /* Tighter radius: 6px */
    --font-family: "Geist", "Geist Sans", system-ui, sans-serif;
  }

  .dark {
    /* Linear-style dark mode - deep, refined, not pure black */
    --background: 225 15% 8%;        /* Deep blue-gray */
    --foreground: 220 13% 91%;       /* Off-white */
    --card: 225 15% 10%;             /* Slightly lighter for cards */
    --card-foreground: 220 13% 91%;
    --popover: 225 15% 12%;
    --popover-foreground: 220 13% 91%;
    --primary: 238 75% 62%;          /* Linear-style violet */
    --primary-foreground: 0 0% 100%;
    --secondary: 225 15% 14%;
    --secondary-foreground: 220 13% 91%;
    --muted: 225 15% 14%;
    --muted-foreground: 220 9% 55%;
    --accent: 225 15% 14%;
    --accent-foreground: 220 13% 91%;
    --destructive: 0 62% 45%;
    --destructive-foreground: 0 0% 100%;
    --border: 225 15% 16%;           /* Subtle borders */
    --input: 225 15% 14%;
    --ring: 238 75% 62%;
  }

  /* Font Variables */
  :root {
    --font-geist: "Geist", "Geist Sans", system-ui, sans-serif;
    --font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --font-inter: "Inter", system-ui, sans-serif;
    --font-jetbrains: "JetBrains Mono", "Fira Code", monospace;
    --font-family: var(--font-geist);
  }

}

/* Color theme classes - outside @layer for higher specificity over :root */
/* These override the default --primary in both light and dark modes */

/* Ocean Theme */
html.theme-ocean {
  --primary: 221 83% 53%;
  --primary-foreground: 210 40% 98%;
  --ring: 221 83% 53%;
}
html.dark.theme-ocean {
  --primary: 217 91% 60%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --ring: 217 91% 60%;
}

/* Forest Theme */
html.theme-forest {
  --primary: 142 76% 36%;
  --primary-foreground: 210 40% 98%;
  --ring: 142 76% 36%;
}
html.dark.theme-forest {
  --primary: 142 71% 45%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --ring: 142 71% 45%;
}

/* Sunset Theme */
html.theme-sunset {
  --primary: 24 95% 53%;
  --primary-foreground: 210 40% 98%;
  --ring: 24 95% 53%;
}
html.dark.theme-sunset {
  --primary: 20 90% 48%;
  --primary-foreground: 210 40% 98%;
  --ring: 20 90% 48%;
}

/* Lavender Theme */
html.theme-lavender {
  --primary: 262 83% 58%;
  --primary-foreground: 210 40% 98%;
  --ring: 262 83% 58%;
}
html.dark.theme-lavender {
  --primary: 263 70% 50%;
  --primary-foreground: 210 40% 98%;
  --ring: 263 70% 50%;
}

/* Rose Theme */
html.theme-rose {
  --primary: 330 81% 60%;
  --primary-foreground: 210 40% 98%;
  --ring: 330 81% 60%;
}
html.dark.theme-rose {
  --primary: 330 90% 66%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --ring: 330 90% 66%;
}

/* Amber Theme */
html.theme-amber {
  --primary: 45 93% 47%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --ring: 45 93% 47%;
}
html.dark.theme-amber {
  --primary: 43 96% 56%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --ring: 43 96% 56%;
}

/* Slate Theme */
html.theme-slate {
  --primary: 215 20% 40%;
  --primary-foreground: 210 40% 98%;
  --ring: 215 20% 40%;
}
html.dark.theme-slate {
  --primary: 215 20% 65%;
  --primary-foreground: 222.2 47.4% 11.2%;
  --ring: 215 20% 65%;
}

/* Font classes - outside @layer for higher specificity */
html.font-geist { --font-family: var(--font-geist); }
html.font-system { --font-family: var(--font-system); }
html.font-inter { --font-family: var(--font-inter); }
html.font-jetbrains { --font-family: var(--font-jetbrains); }

/* Font class also directly sets on body for immediate updates */
html.font-geist body { font-family: var(--font-geist) !important; }
html.font-system body { font-family: var(--font-system) !important; }
html.font-inter body { font-family: var(--font-inter) !important; }
html.font-jetbrains body { font-family: var(--font-jetbrains) !important; }

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-family);
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Subtle focus styles - prevent cut-off rings and reduce visual noise */
  *:focus {
    outline: none;
  }

  *:focus-visible {
    outline: none;
  }
}

/* Custom scrollbar */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted-foreground) / 0.3) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: hsl(var(--muted-foreground) / 0.3);
    border-radius: 4px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: hsl(var(--muted-foreground) / 0.5);
  }
}

/* Drag and drop styles */
@layer utilities {
  .drag-handle {
    cursor: grab;
  }

  .drag-handle:active {
    cursor: grabbing;
  }

  .dragging {
    opacity: 0.5;
    transform: scale(1.02);
  }

  .drop-indicator {
    @apply border-2 border-dashed border-primary/50 rounded-lg;
  }
}

/* Animation utilities */
@layer utilities {
  .animate-in {
    animation: animate-in 0.2s ease-out;
  }

  .animate-out {
    animation: animate-out 0.2s ease-out;
  }

  @keyframes animate-in {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes animate-out {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-10px);
    }
  }
}

/* Tiptap Editor File Upload Styles */
@layer components {
  /* Image styling */
  .tiptap-image-wrapper {
    @apply my-3;
  }

  .tiptap-image {
    @apply max-w-full h-auto rounded-lg;
    max-height: 400px;
    object-fit: contain;
  }

  /* Video styling */
  .tiptap-video-wrapper {
    @apply my-3;
  }

  .tiptap-video {
    @apply max-w-full rounded-lg;
    max-height: 400px;
  }

  /* File attachment styling */
  .tiptap-file-attachment-wrapper {
    @apply my-3;
  }

  .tiptap-file-attachment {
    @apply inline-flex items-center gap-3 px-4 py-3 rounded-lg border;
    @apply bg-muted/30 hover:bg-muted/50 transition-colors;
    @apply max-w-sm;
  }

  /* Upload placeholder styling */
  .tiptap-upload-placeholder-wrapper {
    @apply my-3;
  }

  .tiptap-upload-placeholder {
    @apply inline-flex items-center gap-3 px-4 py-3 rounded-lg border border-dashed;
    @apply bg-muted/20 animate-pulse max-w-sm;
  }

  /* Node view wrappers - ensure proper spacing */
  .ProseMirror .tiptap-image-wrapper,
  .ProseMirror .tiptap-video-wrapper,
  .ProseMirror .tiptap-file-attachment-wrapper,
  .ProseMirror .tiptap-upload-placeholder-wrapper {
    @apply block;
  }

  /* Selected node styling */
  .ProseMirror-selectednode .tiptap-image,
  .ProseMirror-selectednode .tiptap-video,
  .ProseMirror-selectednode .tiptap-file-attachment {
    @apply ring-2 ring-primary ring-offset-2;
  }
}
